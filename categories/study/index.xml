<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>study on limecats Blog</title>
        <link>https://limecats0331.github.io/categories/study/</link>
        <description>Recent content in study on limecats Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Wed, 30 Mar 2022 14:18:16 +0900</lastBuildDate><atom:link href="https://limecats0331.github.io/categories/study/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>왜 JWT를 골랐을까?</title>
        <link>https://limecats0331.github.io/p/%EC%99%9C-jwt%EB%A5%BC-%EA%B3%A8%EB%9E%90%EC%9D%84%EA%B9%8C/</link>
        <pubDate>Wed, 30 Mar 2022 14:18:16 +0900</pubDate>
        
        <guid>https://limecats0331.github.io/p/%EC%99%9C-jwt%EB%A5%BC-%EA%B3%A8%EB%9E%90%EC%9D%84%EA%B9%8C/</guid>
        <description>&lt;h2 id=&#34;들어가기-앞서&#34;&gt;들어가기 앞서&lt;/h2&gt;
&lt;p&gt;이번에 토이 프로젝트인 &lt;code&gt;Battle-city&lt;/code&gt;를 구상하면서 회원가입을 기능이 필요해서 인증에 대해서 공부하게 되었다. &lt;code&gt;cookie&lt;/code&gt;, &lt;code&gt;session&lt;/code&gt;, &lt;code&gt;JWT&lt;/code&gt;, &lt;code&gt;Oauth&lt;/code&gt; 등 많은 방식이 있는데 왜 &lt;code&gt;JWT&lt;/code&gt; 방식을 골랐는지 다른 방식은 어떤 장단점이 있는지 알아보고자 한다.&lt;/p&gt;
&lt;h2 id=&#34;인증&#34;&gt;인증&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;인증&lt;/strong&gt;은 &lt;strong&gt;서비스에 등록된 유저의 신원을 입증&lt;/strong&gt;하는 것이라고 생각하면 된다. 예를 들면 신분증을 통해서 신원을 파악한다거나 학생증을 통해서 학교에 등록된 학생이라는 것을 입증하는 것과 같다고 보면 된다.&lt;/p&gt;
&lt;p&gt;그리고 인증하면 빼놓을 수 없는 것이 &lt;strong&gt;인가&lt;/strong&gt;이다. 인가는 &lt;strong&gt;인증된 사용자에 대한 자원 접근 권한&lt;/strong&gt;이라고 볼 수 있다.&lt;/p&gt;
&lt;p&gt;고로 서비스는 유저의 신원을 파악해서 &lt;em&gt;인증&lt;/em&gt;을 해주고 인증한 유저의 신원에 따라서 &lt;em&gt;인가&lt;/em&gt;받은 범위 내에서 리소스를 제공하는 것이다.&lt;/p&gt;
&lt;p&gt;근데 여기서 중요한 점이 있다. 우리는 보통 대화를 할때 이전에 말했던 것을 기억하고 누구와 대화하고 있는지를 기억하고 그에 맞게 대답한다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;statefull&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;나: 여기 콜라 있어요?&lt;/p&gt;
&lt;p&gt;상대: 있어요~&lt;/p&gt;
&lt;p&gt;나: 그럼 그거 하나 주세요.&lt;/p&gt;
&lt;p&gt;상대: 1500원입니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;하지만 우리의 서버와 클라이언트가 사용하는 &lt;code&gt;http&lt;/code&gt;는 그렇지 못하고 &lt;code&gt;stateless&lt;/code&gt;하다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;stateless&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;나: 여기 콜라 있어요?&lt;/p&gt;
&lt;p&gt;상대: 있어요~&lt;/p&gt;
&lt;p&gt;나: 그럼 그거 하나 주세요.&lt;/p&gt;
&lt;p&gt;상대: 그거가 뭔데요?&lt;/p&gt;
&lt;p&gt;나: ?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그렇기 때문에 우리는 별도의 인증 방법을 거쳐야된다.&lt;/p&gt;
&lt;h3 id=&#34;request-header&#34;&gt;&lt;code&gt;Request Header&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://limecats0331.github.io/img/why_jwt/server_client.svg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;http_img&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;처음엔 사진에서 보이는 &lt;code&gt;HTTP Request&lt;/code&gt;할때 &lt;code&gt;Header&lt;/code&gt;안에 유저의 &lt;code&gt;id&lt;/code&gt;와 &lt;code&gt;password&lt;/code&gt;를 같이 보내보았다.&lt;/p&gt;
&lt;p&gt;하지만 이 방식을 사용하면 매번 로그인을 해줘야되는 단점이 있었다. 만약 유저가 글을 쓴다고하면 로그인을 해야되고 끝나고 수정을 해야된다? 또 로그인을 해야되는 것이다.&lt;/p&gt;
&lt;p&gt;어떻게 보내는 지에 대해서는 이 &lt;a class=&#34;link&#34; href=&#34;https://youtu.be/y0xMXlOAfss?t=384&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;영상&lt;/a&gt;을 참고하면 된다.&lt;/p&gt;
&lt;h3 id=&#34;cookie&#34;&gt;&lt;code&gt;Cookie&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;그래서 우리는 브라우저의 힘을 빌리기로 한다! 바로 &lt;code&gt;Cookie&lt;/code&gt;라는 저장공간을 사용하는 것이다. 그러면 브라우저가 &lt;code&gt;id&lt;/code&gt;와 &lt;code&gt;password&lt;/code&gt;를 쿠키에 저장해놨다가 인증이 필요할 때마다 같이 보내주게 된다.&lt;/p&gt;
&lt;p&gt;그래서 유저는 좀 더 편해졌지만 보안상의 문제가 발생했다. 보통은 클라이언트가 서버보다 보안에 취약하기 때문에 쿠키 안의 정보를 탈취하거나 쿠키 그 자체를 탈취하는 등의 보안상의 문제가 발생했다.&lt;/p&gt;
&lt;h3 id=&#34;session&#34;&gt;&lt;code&gt;session&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;그러면 상대적으로 보안이 더 좋은 서버에 맡기면 되지 않을까? 라는 생각으로 &lt;code&gt;session&lt;/code&gt;이라는 방식이 나왔다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://limecats0331.github.io/img/why_jwt/session.svg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;세션&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;유저는 최초의 로그인 시에 &lt;code&gt;id&lt;/code&gt;와 &lt;code&gt;password&lt;/code&gt;를 서버에 보낸다. 그 후에 서버는 &lt;code&gt;DB&lt;/code&gt;에 대조하여 확인하고 확인되면 서버에 &lt;code&gt;session id&lt;/code&gt;와 유저를 식별할 것을 저장하고 &lt;code&gt;session id&lt;/code&gt;를 유저에게 보내준다.&lt;/p&gt;
&lt;p&gt;그리고 그 후로 &lt;code&gt;session id&lt;/code&gt;를 가지고 요청을 보내면 &lt;code&gt;db&lt;/code&gt;로 가는게 아니고 서버에서 확인을 거치는 방식이다.&lt;/p&gt;
&lt;p&gt;아직도 약간의 문제가 있는데 만약 서비스가 커지면서 scale-out을 했다고 치자.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://limecats0331.github.io/img/why_jwt/many_server.svg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;scale-out&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;그러면 로그인 요청을 3번째 서버에 해서 &lt;code&gt;session id&lt;/code&gt;를 받는다고 가정해보자. 그리고 다음 요청을 첫번째 서버로 하게 된다면? 해당 서버에는 &lt;code&gt;session id&lt;/code&gt;가 없기 때문에 새로운 &lt;code&gt;session id&lt;/code&gt;를 만들게 된다.&lt;/p&gt;
&lt;p&gt;이러한 문제를 해결하기 위해서 우리는 &lt;code&gt;session DB&lt;/code&gt;를 따로 둔다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://limecats0331.github.io/img/why_jwt/with_session_storage.svg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;session_storage&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;이러한 &lt;code&gt;session&lt;/code&gt; 방식도 결국 문제점이 발생하게 되는데 바로 &lt;code&gt;client&lt;/code&gt;들이 많아지게 되는 경우이다. 그렇게 되면 &lt;code&gt;session DB&lt;/code&gt;에 과도한 요청이 몰려서 문제가 발생하는 것이다.&lt;/p&gt;
&lt;h3 id=&#34;json-web-token&#34;&gt;&lt;code&gt;JSON Web Token&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;우리는 각각 &lt;code&gt;client&lt;/code&gt;, &lt;code&gt;server&lt;/code&gt;, &lt;code&gt;DB(storage)&lt;/code&gt;에게 유저에 관한 state를 맡겨서 처리해봤다. 모두 어떠한 문제점을 가지고 있었다. 그래서 다른 곳을 찾았는데 바로 &lt;code&gt;http&lt;/code&gt; 요청에 맡기는 것이다.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;JWT&lt;/code&gt;는 &lt;code&gt;secret key&lt;/code&gt;를 이용한다. 서버는 로그인한 유저에게 유저에 대한 정보와 &lt;code&gt;secret key&lt;/code&gt;를 암호화한 것을 같이 보낸다. 그럼 유저는 그 &lt;code&gt;token&lt;/code&gt;을 저장하고 있다가 인증이 필요할때 같이 보내게 된다. 그럼 서버에서는 받은 &lt;code&gt;token&lt;/code&gt;에 담긴 &lt;code&gt;secret key&lt;/code&gt;를 보고 인증되었음을 확인한다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://limecats0331.github.io/img/why_jwt/JWT.svg&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;JWT&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;이러한 &lt;code&gt;token&lt;/code&gt; 방식은 단순히 &lt;code&gt;key&lt;/code&gt;를 서버에 저장함으로 규모가 커져 &lt;code&gt;scale-out&lt;/code&gt;하더라도 각각의 서버에서 요청을 처리할 수 있다.&lt;/p&gt;
&lt;p&gt;하지만 &lt;code&gt;JWT&lt;/code&gt; 또한 토큰을 브라우저에 저장함으로써 쿠키와 같은 보안상의 문제가 발생한다. 이를 위해서 &lt;code&gt;token&lt;/code&gt;에 만료기한을 설정하는데 만료기한은 보안상의 이점도 가져오지만 유저의 불편함도 가지고 온다. 그래서 서버는 &lt;code&gt;access-token&lt;/code&gt;과 &lt;code&gt;refresh-token&lt;/code&gt;을 나눠서 생성한다. 이것을 유저에게 같이 보내주고 &lt;code&gt;refresh-token&lt;/code&gt;은 따로 저장한다.&lt;/p&gt;
&lt;p&gt;만약 &lt;code&gt;access-token&lt;/code&gt;이 만료되면 &lt;code&gt;refresh-token&lt;/code&gt;을 통해서 인증을 확인하고 &lt;code&gt;access-token&lt;/code&gt;을 재발급해주는 것이다. 세션과 비슷하게 저장소가 따로 필요하지만 요청하는 횟수는 훨씬 줄어서 부하를 줄일 수 있다.&lt;/p&gt;
&lt;p&gt;물론 &lt;code&gt;JWT&lt;/code&gt;가 완벽한 방식이라서 단점이 없는 것은 아니다. 다른 방식에 비해서 &lt;code&gt;token&lt;/code&gt;의 길이가 길기 때문에 네트워크에 부하를 줄 수 있고 만약 유저의 데이터를 직접 수정하는 경우에 토큰을 직접적으로 수정할 수 없는 문제가 있다.&lt;/p&gt;
&lt;h2 id=&#34;그래서-왜-jwt&#34;&gt;그래서 왜 &lt;code&gt;JWT&lt;/code&gt;?&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;session&lt;/code&gt;을 사용하는 방식이 꼭 나쁘거나 안 좋은 것은 아니다. 아직도 많은 기업들이 &lt;code&gt;session&lt;/code&gt;방식을 사용하고 있는데 이는 유저의 로그인 정보를 직접 저장함으로써 생기는 이점들이 있기 때문이다.&lt;/p&gt;
&lt;p&gt;예를 들면 &lt;strong&gt;구글&lt;/strong&gt;은 자신이 로그인한 기기들의 정보를 보고 원치 않은 기기에 접속되있는 경우 로그아웃 하는 기능을 가지고 있다. 또한 원한다면 유저의 정보를 변경했더라도 로그인을 유지할 수 있다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://limecats0331.github.io/img/why_jwt/google_device.png&#34;
	
	
	
	loading=&#34;lazy&#34;
	
		alt=&#34;google_device&#34;
	
	
&gt;&lt;/p&gt;
&lt;p&gt;이처럼 유저의 인증을 직접 활용하고 추적한다고 하면 &lt;code&gt;session&lt;/code&gt;은 좋은 방법일 것이다.&lt;/p&gt;
&lt;p&gt;하지만 나는 금전적으로나 사업적으로 &lt;code&gt;session DB&lt;/code&gt;를 사서 유지할 능력이 없고 굳이 유저에 대해서 추적할 필요가 없기 때문에 &lt;code&gt;JWT&lt;/code&gt; 방식을 선택했다.&lt;/p&gt;
&lt;h2 id=&#34;추가&#34;&gt;추가&lt;/h2&gt;
&lt;p&gt;이 밖에도 별도의 인증서버를 두는 &lt;code&gt;OAuth&lt;/code&gt;, &lt;code&gt;OAuth&lt;/code&gt;를 이용해서 다른 인터넷 서비스 제공자의 정보를 받아서 인증하는 방식 등 더 많은 방식들이 있었지만 큰 틀에서 보면 &lt;code&gt;token&lt;/code&gt;을 사용한다는 점에서 크게 다르지 않아보였다. 그래서 필요하다면 추후에 추가할 예정이다.&lt;/p&gt;
</description>
        </item>
        <item>
        <title>vue-express 연동하기 2022</title>
        <link>https://limecats0331.github.io/p/vue-express-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-2022/</link>
        <pubDate>Mon, 28 Mar 2022 04:46:25 +0900</pubDate>
        
        <guid>https://limecats0331.github.io/p/vue-express-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-2022/</guid>
        <description>&lt;h2 id=&#34;들어가기앞서&#34;&gt;들어가기앞서&lt;/h2&gt;
&lt;p&gt;2022년 3월 이제 뭔가 만들어볼 수 있겠다! 싶었다. 그래서 지금까지 배운 &lt;code&gt;vue&lt;/code&gt;와 &lt;code&gt;express&lt;/code&gt;를 연동해서 뭔가 만들어보고 공부해보자 라는 생각으로 연동을 시작했다.&lt;/p&gt;
&lt;p&gt;당연히 구글 검색을 통해서 연동을 시도했는데 빌드부터 오류를 뱉거나 &lt;code&gt;api&lt;/code&gt;호출이 안되는 경우가 생겼다. 찾아보니 지금 검색해서 나오는 글이 2년에서 4년전 글이여서 &lt;code&gt;Vue&lt;/code&gt;의 버전이 다른게 컸다. 그래서 2022년도 지금 기준으로 최신 버전인 &lt;code&gt;Vue 3.x&lt;/code&gt;에 맞게 글을 쓰고자 한다.&lt;/p&gt;
&lt;h2 id=&#34;vue-node-연동하기&#34;&gt;Vue-node 연동하기&lt;/h2&gt;
&lt;h3 id=&#34;환경&#34;&gt;환경&lt;/h3&gt;
&lt;p&gt;이 글은&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Vue CLI v5.0.4&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Vue 3.x&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;을 기준으로 작성되었다.&lt;/p&gt;
&lt;h3 id=&#34;vue&#34;&gt;Vue&lt;/h3&gt;
&lt;p&gt;원하는 폴더에서&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;vue create frontend
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;를 통해서 &lt;code&gt;vue&lt;/code&gt; 프로젝트를 생성해준다. 여기서 중요한 것은 &lt;code&gt;vue-router&lt;/code&gt;를 같이 설치해주는 것이다. 그러면 다음과 같이 프로젝트가 생성된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── README.md
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── babel.config.js
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── jsconfig.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── node_modules
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── package-lock.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── package.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── public
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   ├── favicon.ico
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   └── index.html
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;├── src
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   ├── App.vue
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   ├── assets
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   ├── components
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   ├── main.js
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   ├── router
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   ├── store
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;│   └── views
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;└── vue.config.js
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;우리는 백엔드 서버를 통해서 build한 결과물을 보여줄 것이다. 그러기 위해서 &lt;code&gt;vue.config.js&lt;/code&gt; 파일을 열어서 build 위치를 변경해야된다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;vue.config.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;defineConfig&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;@vue/cli-service&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;module&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exports&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;defineConfig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;transpileDependencies&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;c1&#34;&gt;//build dir를 외부로 빼줌
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nx&#34;&gt;outputDir&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;resolve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;__dirname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;../backend/public&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;vue.config.js에 들어갈 수 있는 option들에 관련된 정보는 &lt;a class=&#34;link&#34; href=&#34;https://next.cli.vuejs.org/config/#vue-config-js&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;여기&lt;/a&gt;에서 확인할 수 있다.&lt;/p&gt;
&lt;p&gt;이러면 &lt;code&gt;Vue&lt;/code&gt;에서의 준비는 끝!&lt;/p&gt;
&lt;h3 id=&#34;express&#34;&gt;express&lt;/h3&gt;
&lt;p&gt;솔직히 &lt;code&gt;express&lt;/code&gt;는 별로 바뀐게 없어서 크게 다른 점이 없었다. &lt;code&gt;express-generator&lt;/code&gt;가 설치되지 않았다면 설치하고 &lt;code&gt;express&lt;/code&gt;를 설치해주면 된다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;npm install express-generator -g
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;express backend --view=pug
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;그리고 우리는 view에 관련된 부분을 &lt;code&gt;Vue&lt;/code&gt;를 사용할 것이기 때문에 &lt;code&gt;app.js&lt;/code&gt;를 열어서 view에 관련된 부분을 삭제시켜준다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;app.js&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// view engine setup //이 부분을 삭제
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;views&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;__dirname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;views&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;view engine&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;pug&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;그리고 &lt;code&gt;&#39;/backend/views&#39;&lt;/code&gt; 폴더도 삭제시켜주자!&lt;/p&gt;
&lt;h4 id=&#34;404문제-해결&#34;&gt;404문제 해결&lt;/h4&gt;
&lt;p&gt;여기서 Vue를 통해서 SPA를 만들었기 때문에 몇가지 문제가 발생한다. 바로 라우팅 문제인데 만약 &lt;code&gt;/login&lt;/code&gt; 페이지에 접속했다고 생각해보자. 여기서 새로고침을 누르게 되면 서버는 &lt;code&gt;&#39;/login&#39;&lt;/code&gt;으로 &lt;code&gt;GET&lt;/code&gt;요청을 보내게 된다. 하지만 우리는 &lt;code&gt;Vue&lt;/code&gt;에서 페이지에 대한 라우팅을 처리하고 있기 때문에 서버는 &lt;code&gt;404&lt;/code&gt;오류를 뱉게 된다.&lt;/p&gt;
&lt;p&gt;이문제를 해결하기 위해서 2가지 옵션이 있다.&lt;/p&gt;
&lt;h5 id=&#34;1-connect-history-api-fallback&#34;&gt;1. &lt;code&gt;connect-history-api-fallback&lt;/code&gt;&lt;/h5&gt;
&lt;p&gt;첫째는 &lt;code&gt;routes/index.js&lt;/code&gt;를 열어서 다음과 같이 수정해준다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;index.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;express&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;router&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Router&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* GET home page. */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;router&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sendFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;__dirname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;../public&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;index.html&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;module&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exports&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;router&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;이러면 서버에 접속하면 &lt;code&gt;index.html&lt;/code&gt;파일을 보내주게 된다. 그후에 &lt;code&gt;connect-history-api-fallback&lt;/code&gt;이라는 미들웨어를 설치해준다. 자세한 것은 &lt;a class=&#34;link&#34; href=&#34;https://github.com/bripkens/connect-history-api-fallback&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;깃허브&lt;/a&gt;에서 확인할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;npm install connect-history-api-fallback
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;그리고 &lt;code&gt;/backend&lt;/code&gt;의 &lt;code&gt;app.js&lt;/code&gt;에 다음과 같이 추가해준다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;app.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;history&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;connect-history-api-fallback&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;history&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;kr&#34;&gt;static&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;__dirname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;public&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;여기서 &lt;code&gt;app.use(history());&lt;/code&gt;의 위치가 중요한대 &lt;code&gt;app.use(express.static(path.join(__dirname, &#39;public&#39;)));&lt;/code&gt; 보다 위에 있어야 된다고 한다.&lt;/p&gt;
&lt;p&gt;이러면 &lt;code&gt;express&lt;/code&gt; 설정도 끝!&lt;/p&gt;
&lt;h5 id=&#34;2-getcallback&#34;&gt;2. &lt;code&gt;get(&#39;*&#39;,[callback])&lt;/code&gt;&lt;/h5&gt;
&lt;p&gt;두번째 방법은 조금 더 쉬운 방법이다. &lt;code&gt;routes/index.js&lt;/code&gt;를 열어서 다음과 같이 수정해준다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;index.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;express&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;router&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;express&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Router&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;require&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;path&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;/* GET index.html */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;router&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;req&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;nx&#34;&gt;res&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;sendFile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;join&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;__dirname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;../public&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;index.html&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;module&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;exports&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;router&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;이러면 끝이다. 그러면 모든 라우팅에 대해서 &lt;code&gt;index.html&lt;/code&gt;을 호출하고 vue-router에서 설정한 대로 라우팅하게 된다. 여기서 주의할 점이 있는데 이렇게 되면 API call도 모두 &lt;code&gt;index.html&lt;/code&gt;을 호출하게 될 수 있다.&lt;/p&gt;
&lt;p&gt;그래서 &lt;code&gt;/backend&lt;/code&gt;의 &lt;code&gt;app.js&lt;/code&gt;에 다음과 같은 순서로 라우팅해준다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;app.js&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/api&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;apiRouter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;indexRouter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;Node.js&lt;/code&gt;의 미들웨어는 위에서부터 실행되기 때문에 &lt;code&gt;&#39;/api&#39;&lt;/code&gt;로 들어가는 호출은 한번 걸러지고 남은 호출은 모두 &lt;code&gt;index.html&lt;/code&gt;을 호출하게 된다. 추가로 API를 나누고 싶으면 &lt;code&gt;app.use(&#39;/&#39;, indexRouter);&lt;/code&gt; 위에 선언해주면 된다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;두 방식이 어떤 차이점이 있고 두번째 방식을 사용하는 사람들이 없던데 어떤 단점이 있는지 잘 모르겠다. 아시는 분은 댓글 남겨주세요..!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;build--start&#34;&gt;build &amp;amp; start&lt;/h3&gt;
&lt;p&gt;이제 아까 만들었던 &lt;code&gt;&#39;/front&#39;&lt;/code&gt;폴더로 들어가서 빌드를 해준다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;npm run build
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;그리고 &lt;code&gt;&#39;/backend&#39;&lt;/code&gt; 폴더로 가서 서버를 실행해주면 끝이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;npm start
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;이제 &lt;code&gt;http://localhost:3000/&lt;/code&gt; 로 접속하면 빌드한 &lt;code&gt;vue&lt;/code&gt;파일을 볼 수 있다. 또한 routing한 페이지도 잘 보이고 새로고침해도 &lt;code&gt;404&lt;/code&gt; 오류가 나지 않는 것을 볼 수 있다.&lt;/p&gt;
</description>
        </item>
        
    </channel>
</rss>
